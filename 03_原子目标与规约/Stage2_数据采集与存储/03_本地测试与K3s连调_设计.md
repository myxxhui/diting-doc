# L3 · Stage2-03 本地测试与 K3s 连调设计

> [!NOTE] **[TRACEBACK] 原子规约锚点**
> - **原子规约**: [_共享规约/11_数据采集与输入层规约](../_共享规约/11_数据采集与输入层规约.md)
> - **DNA**: [_System_DNA/Stage2_数据采集与存储/03_dna_本地测试与K3s连调.yaml](../_System_DNA/Stage2_数据采集与存储/03_dna_本地测试与K3s连调.yaml)
> - **L4 实践**: [04_阶段规划与实践/Stage2_数据采集与存储/03_本地测试与K3s连调_实践](../../04_阶段规划与实践/Stage2_数据采集与存储/03_本地测试与K3s连调_实践.md#l4-stage2-03-exit)
> - **L5 锚点**: [02_验收标准#l5-stage-stage2_03](../../05_成功标识与验证/02_验收标准.md#l5-stage-stage2_03)

<a id="design-stage2-03-goal"></a>
## 本步目标

本地测试与 K3s 连调；每阶段均需本地测试 + 连调；初期本地进程连 K3s DB（NodePort），后期 K3s Job。

<a id="design-stage2-03-points"></a>
## 设计要点

- **连调**：本地采集进程连 K3s 内 TimescaleDB/Redis（NodePort）；MarketDataFeed 可读取 L1
- **验证**：至少一种数据源可写入 L1 且可被消费；make ingest-test 通过
- **必做**：步骤 6 MarketDataFeed 读 L1 验证（或单测+记录待补验）；步骤 7 五条 psql 验证与 docs/ingest-test-target.md 一致；步骤 8 回收环境（本地 Compose 路线）

<a id="design-stage2-03-exit"></a>
## 准出

本地采集可写 L1；MarketDataFeed 可读取（或单测+记录待补验）；五条 psql 验证与约定一致；连调路径跑通；验证后回收环境（本地 Compose 必做步骤 8）。
