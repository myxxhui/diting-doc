# Stage1-01 三位一体仓库初始化

> [!NOTE] **[TRACEBACK] 步骤锚点**
> - **战略维度**: [01_开发与交付流程维度](../../02_战略维度/开发与交付/01_开发与交付流程维度.md)
> - **原子规约**: [01_开发生命周期与实践流程规约](../../03_原子目标与规约/开发与交付/01_开发生命周期与实践流程规约.md)、[_共享规约/02_三位一体仓库规约](../../03_原子目标与规约/_共享规约/02_三位一体仓库规约.md)
> - **DNA stage_id**: `stage1_01`
> - **本步设计文档**: [01_三位一体仓库设计](../../03_原子目标与规约/Stage1_仓库与骨架/01_三位一体仓库设计.md#design-stage1-01-exit)
> - **本步 DNA 文件**: [dna_stage1_01.yaml](../../03_原子目标与规约/_System_DNA/Stage1_仓库与骨架/dna_stage1_01.yaml)

<a id="l4-step-nav"></a>
## 步骤导航
- **上一步**：无（本阶段第一步）
- **下一步**：[02_核心接口与Proto占位](02_核心接口与Proto占位.md#l4-stage1-02-goal)

> [!IMPORTANT] **实践测试方式约定**
> 本步以**本地 Docker Compose**（或等价本地环境）为**主要（默认）**实践测试方式，可选 K3s/实盘；无云凭证或无需真实集群时**优先**使用本地 Compose 完成验收。见 [00_系统规则_通用项目协议](../../00_系统规则_通用项目协议.md)、[02_三位一体仓库规约](../../03_原子目标与规约/_共享规约/02_三位一体仓库规约.md)#本地开发与部署文件。

<a id="l4-stage1-01-goal"></a>
## 本步目标
三仓目录与占位就绪；diting-core make test 可运行。

## 本步骤落实的 _System_DNA 键

| DNA 键 | 用途 |
|--------|------|
| `dna_dev_workflow.workflow_stages[stage1_01]` | delivery_scope、exit_criteria、work_dir、verification_commands、l5_stage_anchor |
| `global_const.trinity_repos` | repo_i/repo_a.directories、parent_path_default |

## 工作目录

**新建仓库的父路径**（global_const.trinity_repos.parent_path_default）

## 核心指令

```
你是在文档仓同级的父路径下执行 Stage1-01（三位一体仓库初始化）的实践者。请先阅读：dna_dev_workflow.workflow_stages[stage1_01]、global_const.trinity_repos、03_原子目标与规约/_共享规约/02_三位一体仓库规约.md。
禁止在 Prompt 或 01_ 中写明文密钥。

你的任务：
1. 在约定路径下创建 diting-core，按 repo_i.directories 建立 diting/abstraction/、diting/drivers/、diting/moe/、diting/risk/、diting/strategy/、tests/、design/；根目录添加 Makefile，提供 test target（可为占位，退出码 0）。
2. 创建 diting-infra，按 repo_a 建立 charts/、config/、observability/、secrets/；在 config/environments/dev/ 下创建 deploy.json 占位。
3. 确认目录与 03_原子目标与规约/_共享规约/02_三位一体仓库规约.md 及 global_const 一致；无业务代码，仅占位与结构。
```

<a id="l4-stage1-01-exit"></a>
## 验证与准出

| 命令/检查 | 工作目录 | 期望结果 |
|-----------|----------|----------|
| `test -d diting-core/diting` | 父路径 | 目录存在 |
| `test -d diting-infra/charts` | 父路径 | 目录存在 |
| `make -C diting-core test` | 父路径 | 退出码 0（占位通过） |

**准出**：三仓存在且目录与 global_const.trinity_repos 一致；diting-core make test 可运行。**已更新 L5 [02_验收标准 对应行](../../05_成功标识与验证/02_验收标准.md#l5-stage-stage1_01)**。
