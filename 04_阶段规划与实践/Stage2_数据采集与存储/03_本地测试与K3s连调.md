# Stage2-03 本地测试与 K3s 连调

> [!NOTE] **[TRACEBACK] 步骤锚点**
> - **原子规约**: [_共享规约/11_数据采集与输入层规约](../../03_原子目标与规约/_共享规约/11_数据采集与输入层规约.md)
> - **DNA stage_id**: `stage2_03`
> - **本步设计文档**: [03_本地测试与K3s连调设计](../../03_原子目标与规约/Stage2_数据采集与存储/03_本地测试与K3s连调设计.md#design-stage2-03-exit)
> - **本步 DNA 文件**: [dna_stage2_03.yaml](../../03_原子目标与规约/_System_DNA/Stage2_数据采集与存储/dna_stage2_03.yaml)

<a id="l4-step-nav"></a>
## 步骤导航
- **上一步**：[02_采集逻辑与Dockerfile](02_采集逻辑与Dockerfile.md#l4-stage2-02-goal)
- **下一步**：[04_镜像打包与ACR推送](04_镜像打包与ACR推送.md#l4-stage2-04-goal)

## 工作目录

**diting-core**

<a id="l4-stage2-03-goal"></a>
## 本步目标

本地测试 + K3s 连调；本地进程连 K3s DB（NodePort）；MarketDataFeed 可读取 L1。

## 核心指令

```
你是在 diting-core 中执行 Stage2-03（本地测试与 K3s 连调）的实践者。必读：11_规约、05_接口抽象层（MarketDataFeed）。

任务：
1. 本地采集进程连接 K3s 内 TimescaleDB/Redis（NodePort）。
2. 验证至少一种数据源可写入 L1，MarketDataFeed 可读取。
3. make ingest-test 通过。
```

<a id="l4-stage2-03-exit"></a>
## 验证与准出

本地采集可写 L1；MarketDataFeed 可读取；make ingest-test 通过。**已更新 L5 [02_验收标准 对应行](../../05_成功标识与验证/02_验收标准.md#l5-stage-stage2_03)**。
